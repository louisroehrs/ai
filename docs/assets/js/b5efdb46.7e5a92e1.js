"use strict";(self.webpackChunkroehrsai=self.webpackChunkroehrsai||[]).push([[9157],{398:(n,e,t)=>{t.r(e),t.d(e,{assets:()=>l,contentTitle:()=>i,default:()=>c,frontMatter:()=>a,metadata:()=>r,toc:()=>d});var r=t(5071),o=t(4848),s=t(8453);const a={slug:"mandelbrot",title:"Mandelbrot with WebGPU",authors:"roehrs",tags:["ai","gpu"]},i=void 0,l={authorsImageUrls:[void 0]},d=[{value:"Web GPU Mandlebrot",id:"web-gpu-mandlebrot",level:3}];function p(n){const e={code:"code",em:"em",h3:"h3",p:"p",pre:"pre",...(0,s.R)(),...n.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h3,{id:"web-gpu-mandlebrot",children:"Web GPU Mandlebrot"}),"\n",(0,o.jsx)(e.p,{children:"This Mandlebrot set is being displayed in your browser using your GPU. This is not a movie. It is being calculated and rendered in realtime. If you only see a black square, try a different browser that supports WebGL and be sure to turn on the WebGL support for your browser. If only Benoit Mandlebrot, an IBMer, had a GPU on which to run his JavaScript code.\u2028"}),"\n",(0,o.jsx)(e.p,{children:"We can build a gpu kernal which simply provides the GPU with the code in JavaScript to tell the GPU what color to set the pixel at the given x, y coordinate and bind it to an HTML canvas."}),"\n",(0,o.jsx)(e.p,{children:"Get this.  It will even run on an AppleWatch!"}),"\n",(0,o.jsx)("iframe",{src:"/mandelbrot/",height:"400",width:"400"}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)("a",{href:"/mandelbrot/fullscreen.html",children:"Full Screen"}),"\n",(0,o.jsx)("br",{}),"\n",(0,o.jsx)(e.p,{children:"Here is the code.  This was written pre-AI coding tools.\nSet up an HTML page like so."}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.em,{children:"index.html"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:'<!DOCTYPE html>\n<style>\n#mycanvas {\n   -webkit-transform: translate3d(0, 0, 0);\n   -moz-transform: translate3d(0, 0, 0);\n   -ms-transform: translate3d(0, 0, 0);\n   transform: translate3d(0, 0, 1);\n   background-color:transparent;\n}\n.site-inner {\n    margin: 0 auto;\n     max-width:3000px;\n    position: relative;\n}\n\n</style>\n<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.js"><\/script>\n\x3c!-- <script src="http://34.212.196.99/wp-content/uploads/2017/07/gpu.js"><\/script> --\x3e\n<script src="gpu-new.js"><\/script>\n\x3c!-- <script src="http://34.212.196.99/wp-content/uploads/2017/07/mandlebrot.js"><\/script> --\x3e\n<script src="mandlebrot.js"><\/script>\nThis Mandlebrot set is being displayed in your browser using your GPU. This is not a movie.  If you only see a black square, try a different browser that supports WebGL and be sure to turn on the WebGL support for your browser.  If only Benoit Mandlebrot, an IBMer, had a GPU on which to run his JavaScript code...\n<BR>\n<small style="display:inline-block">\n   Mandelbrot Iterations<span id=\'nm\'></span>\n   <BR>\n   Frames Per Second <span id=\'fpsm\'></span>\n</small>\n<div id="mycanvas"></div>\n'})}),"\n",(0,o.jsx)(e.p,{children:"Grab the gpu-new.js library from here."}),"\n",(0,o.jsx)(e.p,{children:"Add the mandelbrot.js below."}),"\n",(0,o.jsx)(e.p,{children:(0,o.jsx)(e.em,{children:"mandlebrot.js"})}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{children:"const gpu = new GPU();\n\n\nvar rendermandlebrot = gpu.createKernel(function(it,x,y,s) {\n    var j =0;\n    var zr = 0.0;\n    var zi = 0.0;\n    var maxiter = it;\n    var zr2 = 0.0;\n    var zi2 = 0.0;\n    var newzr = 0.0;\n    var myx = ((this.thread.x +x) / s);\n    var myy = ((this.thread.y +y) / s);\n    for (var i = 0; i < maxiter; i++) {\n        if (( zr2 + zi2) < 4) {\n            //3+5i  sqared = 9 -25 + 15i\n            newzr = zr2 - zi2 + myx;\n            zi =  2 * zr * zi + myy;\n            zr = newzr;\n            zr2 = zr * zr;\n            zi2 = zi * zi;\n            j++;\n        } \n    }\n    if (j > maxiter-3) \n    {\n        this.color(0,0,0,0);\n    } else {\n        this.color((j%256)/256,(j%64)/64,(j%16)/16,0);\n    }\n},\n/*\n.dimensions([300,300])\n.graphical(true)\n.loopMaxIterations(20000)\n.mode('gpu');\n*/\n{\n    output:[300, 300],\n    graphical:true,\n    loopMaxIterations:20000,\n    mode:\"gpu\"\n});\n\n\n$('document').ready ( function () {\n    var start = Date.now();\n    var stop = 0;\n    var times = [];\n    function frame() {\n        now = Date.now() - start;\n        times.push(now);\n        fps = window.document.getElementById('fpsm');\n        fps.textContent = Math.floor(1000/(now - times[times.length-2]));\n        \n        iters = window.document.getElementById('nm');\n        iters.textContent = stop + \":\" + (4100+810*15+stop*15) +\":\"+ (-1000-800*5-stop*7)+ \":\" +  (14000+800*40+stop*40);\n        rendermandlebrot(stop, 4100+810*15+stop*15, -1000-800*5-stop*7, 14000+800*40+stop*40);\n\n        var canvas = rendermandlebrot.getCanvas();\n\n        document.getElementById('mycanvas').appendChild(canvas);\n        if (stop++ < 6000) {  //0000) {\n            window.requestAnimationFrame(frame);\n        }\n    }\n    window.requestAnimationFrame(frame);\n    \n});\n"})})]})}function c(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,o.jsx)(e,{...n,children:(0,o.jsx)(p,{...n})}):p(n)}},8453:(n,e,t)=>{t.d(e,{R:()=>a,x:()=>i});var r=t(6540);const o={},s=r.createContext(o);function a(n){const e=r.useContext(s);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function i(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(o):n.components||o:a(n.components),r.createElement(s.Provider,{value:e},n.children)}},5071:n=>{n.exports=JSON.parse('{"permalink":"/blog/mandelbrot","editUrl":"https://github.com/louisroehrs/ai/blog/2017-07-16-mandelbrot/index.mdx","source":"@site/blog/2017-07-16-mandelbrot/index.mdx","title":"Mandelbrot with WebGPU","description":"Web GPU Mandlebrot","date":"2017-07-16T00:00:00.000Z","tags":[{"inline":false,"label":"AI","permalink":"/blog/tags/ai","description":"AI Articles"},{"inline":true,"label":"gpu","permalink":"/blog/tags/gpu"}],"readingTime":2.44,"hasTruncateMarker":true,"authors":[{"name":"Louis Roehrs","title":"Architect","url":"https://github.com/louisroehrs","page":{"permalink":"/blog/authors/roehrs"},"socials":{"x":"https://x.com/louisroehrs","github":"https://github.com/louisroehrs","linkedin":"https://www.linkedin.com/in/louisroehrs/"},"imageURL":"/img/1683128840744.jpeg","key":"roehrs"}],"frontMatter":{"slug":"mandelbrot","title":"Mandelbrot with WebGPU","authors":"roehrs","tags":["ai","gpu"]},"unlisted":false,"prevItem":{"title":"Using your GPU to make a lava lamp","permalink":"/blog/lava-lamp-post"},"nextItem":{"title":"After IBM Watson Trend, Watson has been put to work for Marketing Practitioners","permalink":"/blog/trend-for-marketing-post"}}')}}]);